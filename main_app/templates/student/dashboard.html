{% extends "base.html" %}
{% load static %} 
{% block content %}
<link rel="stylesheet" href="{% static 'dashboard.css' %}" />
<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
<div class="dashboard-container">

  <div class="overall-progress-section">
    {% comment %} <h2>Your Overall Progress</h2> {% endcomment %}
    <p id="total-number">{{ current_month }}/{{ total_months }}</p>
    <div class="progress-bar-total">
      <div class="progress-fill-total" style="width: {{ overall_progress }}%;"></div>
    </div>
  </div>

  <div class="profile-section">
    <div class="profile-avatar">
      {{ student.name|first|upper }}
    </div>
    <h2>{{student.name}}</h2>
    <p><strong>LinkedIn:<a href="{{student.linkedin_url}}" target="_blank">{{student.linkedin_url}}</a></strong></p>
    <p><strong>CV:<a href="{{student.cv_file}}" target="_blank">{{student.cv_file}}</a></strong></p>
    <p><strong>Support Date: {{student.support_start_date}}</strong></p>
    <p><strong>Support End Date: {{student.support_end_date}}</strong></p>
    <p><strong>Employment Status: {{student.employment_status}}</strong></p>

    {% if student.employment_status == 'EMPLOYED' %}
    <div class="employment-info">
    <p><strong>Job Title: {{student.job_title}}</strong></p>
    <p><strong>Job Start Date: {{student.job_start_date}}</strong></p>
    </div>
    {% endif %}
  </div>

  <div class="progress-logs-section">
    <h2>Progress Logs</h2>
    {% if progress_logs %} 
    <ul>
      {% for log in progress_logs %}
      <li><a href="{% url 'progress_log_detail' log.pk %}">{{ log.month_number }}</a></li>
      {% endfor %}
    </ul>
    {% else %}
    <p>No progress logs available</p>
    {% endif %}
  </div>

  <div class="event-section">
    <h2>Upcoming Events</h2>
    {% if events %}
      <div class="events-list">
        {% for event in events %}
        <div class="event-card">
          <h3>{{ event.title }}</h3>
          <p class="event-date">{{ event.date|date:"F j, Y" }} at {{ event.date|time:"g:i A" }}</p>
          {% if event.description %}
          <p class="event-description">{{ event.description }}</p>
          {% endif %}
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="no-events">No upcoming events</p>
    {% endif %}
  </div>

</div>
{% endblock %}
